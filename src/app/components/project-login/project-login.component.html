<ut-header></ut-header>

<div class="container-fluid mt-2 mt-lg-5 mb-5">

  <div class="col-xs-12 col-sm-8 col-md-5 col-lg-4 col-xl-3 mx-auto login-container">

    <h4 class="mb-3">Your Project-Account</h4>

    <form (submit)="login()">
      <fieldset [attr.disabled]="!isSslConnection() ? true : null">
        <div class="form-group">
          <input type="text" class="form-control" name="username" placeholder="Username" [(ngModel)]="this.username" required>
        </div>
        <div class="form-group">
          <input type="password" class="form-control" name="password" placeholder="Password" [(ngModel)]="this.password" required>
        </div>
        <button type="submit" class="btn btn-block btn-primary">
          <span *ngIf="!hasStatus(StatusKey.LOGIN, StatusValue.IN_PROGRESS)">
            Log in
          </span>
          <span *ngIf="hasStatus(StatusKey.LOGIN, StatusValue.IN_PROGRESS)">
            Logging you in...
            <i class="fa fa-spin load-xs fa-refresh float-left"></i>
          </span>
        </button>
      </fieldset>
    </form>

  </div>

  <div *ngIf="!isSslConnection()" class="col-xs-12 col-sm-8 col-md-5 col-lg-4 col-xl-3 mx-auto login-annotation-container login-annotation-danger">

    You may not log in using an insecure connection.

  </div>

  <div
    *ngIf="hasStatus(StatusKey.LOGIN, StatusValue.BAD_CREDENTIALS)"
    class="col-xs-12 col-sm-8 col-md-5 col-lg-4 col-xl-3 mx-auto login-annotation-container login-annotation-danger">

    The username and password were not recognized

  </div>

  <div
    *ngIf="hasStatus(StatusKey.LOGIN, StatusValue.FAILED)"
    class="col-xs-12 col-sm-8 col-md-5 col-lg-4 col-xl-3 mx-auto login-annotation-container login-annotation-danger">

    Login failed. Please retry.

  </div>

  <div
    *ngIf="accessReason === LoginAccessReason.FORCE_LOGOUT_EXPIRED"
    class="col-xs-12 col-sm-8 col-md-5 col-lg-4 col-xl-3 mx-auto login-annotation-container login-annotation-warning">

    Your login expired, please log in again

  </div>

  <div
    *ngIf="accessReason === LoginAccessReason.FORCE_LOGOUT"
    class="col-xs-12 col-sm-8 col-md-5 col-lg-4 col-xl-3 mx-auto login-annotation-container login-annotation-info">

    You have been logged out

  </div>

  <div
    *ngIf="accessReason === LoginAccessReason.USER_LOGOUT"
    class="col-xs-12 col-sm-8 col-md-5 col-lg-4 col-xl-3 mx-auto login-annotation-container login-annotation-success">

    Logged out successfully

  </div>

  <div
    *ngIf="accessReason === LoginAccessReason.NOT_AUTHENTICATED"
    class="col-xs-12 col-sm-8 col-md-5 col-lg-4 col-xl-3 mx-auto login-annotation-container login-annotation-info">

    Please log in to view this page

  </div>

  <div class="col-xs-12 col-sm-8 col-md-5 col-lg-4 col-xl-3 mx-auto login-annotation-container">

    <p>
      Your personal project account enables you to enter phenology observations, access project-related news and much
      more.
    </p>

    <div *ngIf="showDataDisclaimer">

      <hr/>

      We don't store any personal data except those needed for
      scientific research clearly marked to be sent off for submission.
      <br/>
      No automated E-Mails are sent out at any time to any user.
      <br/>
      By logging in you agree to store your personal login information inside your browser.
    </div>

    <a *ngIf="!showDataDisclaimer"
       (click)="showDataDisclaimer = true"
       (keydown)="showDataDisclaimer = true">Learn more</a>

  </div>

</div>

<ut-footer></ut-footer>
