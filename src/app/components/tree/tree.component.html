<div *ngIf="hasStatus(StatusKey.APP_TRANSFER_STATUS, StatusValue.SUCCESSFUL)" class="content-status success">
  <div class="container d-flex flex-row align-items-center">
    {{'tree.beacon.transfer.success' | translate}}
  </div>
</div>

<div *ngIf="hasStatus(StatusKey.APP_TRANSFER_STATUS, StatusValue.FAILED)" class="content-status danger">
  <div class="container d-flex flex-row align-items-center">
    {{'tree.beacon.transfer.failed' | translate}}
  </div>
</div>

<div *ngIf="hasStatus(StatusKey.TREE_LOADING, StatusValue.IN_PROGRESS)"
     class="d-flex flex-row justify-content-center my-4">
  <i class="i i-sm i-black i-spin i-load mr-1"></i>
  {{'tree.loading' | translate}}
</div>

<ng-container *ngIf="tree">

<div class="content-cat">
  <div class="container">
    <div class="content-cat-heading">{{'tree.species.' + tree.species.name | lowercase | translate}}</div>
    <div class="content-cat-text">
      <i>{{'tree.species.latin.' + tree.species.name | lowercase | translate}}</i>
    </div>
  </div>
</div>

<div *ngIf="tree.id === 1" class="content-cat">
  <div class="container tree-image">
    <div class="content-cat-heading">{{'tree.summary.title' | translate}}</div>
    <div class="content-cat-flex flex-md-nowrap">
      <div class="content-cat-text flex-grow-1" [innerHTML]="'tree.summary.text' | translate">
      </div>
      <ut-zoom [content]="treeImg" [fullscreenContent]="treeImgFull">
      </ut-zoom>
      <ng-template #treeImg>
        <img class="content-cat-img" src="../../../assets/content/img/tree_1.jpg"/>
      </ng-template>
      <ng-template #treeImgFull>
        <img class="fullscreen-content" src="../../../assets/content/img/tree_1.jpg"/>
      </ng-template>
    </div>
  </div>
</div>

<div class="content-cat">
  <div class="container tree-image">
    <div class="content-cat-heading">{{'tree.through_year.title' | translate}}</div>
    <div class="content-cat-flex flex-md-nowrap">
      <div class="content-cat-text flex-grow-1">
        <div [innerHTML]="'tree.through_year.text' | translate"></div>
        <div class="text-subtle text-xs mt-2">
          {{'tree.through_year.update_month' | translate}}
        </div>
      </div>
      <ut-slideshow #throughYearSlideshow [slides]="[
                              {'url': '../../../assets/content/img/phenology_seasons/1.JPG'},
                              {'url': '../../../assets/content/img/phenology_seasons/2.JPG'},
                              {'url': '../../../assets/content/img/phenology_seasons/3.JPG'},
                              {'url': '../../../assets/content/img/phenology_seasons/4.JPG'},
                              {'url': '../../../assets/content/img/phenology_seasons/5.JPG'},
                              {'url': '../../../assets/content/img/phenology_seasons/6.JPG'},
                              {'url': '../../../assets/content/img/phenology_seasons/7.JPG'},
                              {'url': '../../../assets/content/img/phenology_seasons/8.JPG'},
                              {'url': '../../../assets/content/img/phenology_seasons/9.JPG'},
                              {'url': '../../../assets/content/img/phenology_seasons/10.JPG'},
                              {'url': '../../../assets/content/img/phenology_seasons/11.JPG'},
                              {'url': '../../../assets/content/img/phenology_seasons/12.JPG'}
                              ]"
                    [slideTemplate]="treeSlide"
                    [intervalMs]="2500">
      </ut-slideshow>
      <ng-template #treeSlide let-url="url">
        <ut-zoom [content]="img"
                 [fullscreenContent]="imgFull"
                 [showControls]="true"
                 (previous)="throughYearSlideshow.previousSlide()"
                 (next)="throughYearSlideshow.nextSlide()"
                 (opening)="throughYearSlideshow.pause = true"
                 (closed)="throughYearSlideshow.pause = false">
        </ut-zoom>
        <ng-template #img>
          <img class="content-cat-img" [src]="url"/>
        </ng-template>
        <ng-template #imgFull>
          <img class="fullscreen-content" [src]="url"/>
        </ng-template>
      </ng-template>
    </div>
  </div>
</div>

<div class="content-cat">
  <div class="container tree-image">
    <div class="content-cat-heading">{{'tree.cooling_power.title' | translate}}</div>
    <div class="content-cat-flex flex-md-nowrap">
      <div class="content-cat-text flex-grow-1">
        <div [innerHTML]="'tree.cooling_power.text' | translate"></div>
        <div class="text-subtle text-xs">
          {{'tree.cooling_power.update_month' | translate}}
        </div>
      </div>
      <img class="content-cat-img" src="../../../assets/content/img/tree-temp.svg"/>
    </div>
  </div>
</div>

<div class="content-cat">
  <div class="container tree-image">
    <div class="content-cat-heading">{{'tree.leaf_development.title' | translate}}</div>
    <div class="content-cat-flex flex-lg-nowrap">
      <div class="content-cat-text flex-grow-1">
        {{'tree.leaf_development.text' | translate}}
        <div class="text-subtle text-xs mt-2">
          {{'tree.leaf_development.update_month' | translate}}
        </div>
      </div>
      <ut-audio-img
        *lang="'de-DE'"
        image="../../../assets/content/img/blattentfaltung_2018_10.jpeg"
        audio="../../../assets/content/audio/blattentfaltung_2018_10.mp3"
        class="content-cat-img-lg">
      </ut-audio-img>
      <ut-audio-img
        *lang="'en-GB'"
        image="../../../assets/content/img/blattentfaltung_2018_10_en.jpeg"
        audio="../../../assets/content/audio/blattentfaltung_2018_10.mp3"
        class="content-cat-img-lg">
      </ut-audio-img>
    </div>
  </div>
</div>

<div class="content-cat">
  <div class="container tree-image">
    <div class="content-cat-heading">
      <i *ngIf="appTransferAmount" class="feature-pointer mr-1"></i>
      {{'tree.beacon.details.heading' | translate}}
    </div>
    <div *ngIf="appTransferAmount" class="text-center">
      <div class="transfer-message">
        {{'tree.beacon.transfer.message.title' | translate}}
          <span>
            &mdash; {{'tree.beacon.transfer.message.text' | translate:{'amount': appTransferAmount} }}
          </span>
      </div>
    </div>
    <div *ngIf="tree.beacons && tree.beacons.length > 0"
         class="mt-3">
      <ut-beacon-list
        [beacons]="tree.beacons"
        [preselectDeviceId]="beaconDeviceIdPreselect"
      ></ut-beacon-list>
    </div>
    <div *ngIf="!tree.beacons || tree.beacons.length === 0"
         class="status-img my-4">
      <img src="/assets/img/icon/beacon_none_grey.svg" />
      <div>
        {{'tree.beacon.details.none_attached' | translate}}
      </div>
    </div>
  </div>
</div>

<div *auth="envService.security.rolesAdmin" class="content-cat">
  <div class="container tree-image">
    <div class="content-cat-heading">
      {{'tree.admin.title' | translate}}
    </div>
    <div class="content-cat-text">
      {{'tree.admin.desc' | translate}}
    </div>
    <a class="content-cat-link"
       [routerLink]="['/admin/tree']"
       [queryParams]="{'tree': tree.id}">
      {{'tree.admin.edit_link' | translate}}
    </a>
  </div>
</div>

</ng-container>

<div *ngIf="hasAnyStatusKey([StatusKey.TREE_VALIDATION, StatusKey.TREE_LOADING], StatusValue.FAILED)"
     class="status-overlay position-relative d-block h-auto my-4">
  <div class="status-content">
    <div class="status-heading heading-danger">
      {{'tree_view.error.title' | translate}}
    </div>
    <div class="status-text">
      {{'tree_view.error.text' | translate}}
    </div>
    <div class="status-controls">
      <button class="btn btn-light"
              (click)="ngOnInit()">{{'general.retry' | translate}}</button>
    </div>
  </div>
</div>
